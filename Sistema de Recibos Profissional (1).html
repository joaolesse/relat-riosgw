<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
  <title>Sistema de Recibos Profissional - Guich√™ Web</title>
  <meta name="description" content="Sistema profissional de gera√ß√£o de recibos com abas de Di√°rias, Despesas e Adiantamento.">
  <style>
:root {
  --color-white: rgba(255, 255, 255, 1);
  --color-black: rgba(0, 0, 0, 1);
  --color-cream-50: rgba(252, 252, 249, 1);
  --color-cream-100: rgba(255, 255, 253, 1);
  --color-gray-200: rgba(245, 245, 245, 1);
  --color-gray-300: rgba(167, 169, 169, 1);
  --color-gray-400: rgba(119, 124, 124, 1);
  --color-slate-500: rgba(98, 108, 113, 1);
  --color-brown-600: rgba(94, 82, 64, 1);
  --color-charcoal-700: rgba(31, 33, 33, 1);
  --color-charcoal-800: rgba(38, 40, 40, 1);
  --color-slate-900: rgba(19, 52, 59, 1);
  --color-teal-300: rgba(50, 184, 198, 1);
  --color-teal-400: rgba(45, 166, 178, 1);
  --color-teal-500: rgba(33, 128, 141, 1);
  --color-teal-600: rgba(29, 116, 128, 1);
  --color-teal-700: rgba(26, 104, 115, 1);
  --color-teal-800: rgba(41, 150, 161, 1);
  --color-red-400: rgba(255, 84, 89, 1);
  --color-red-500: rgba(192, 21, 47, 1);
  --color-orange-400: rgba(230, 129, 97, 1);
  --color-orange-500: rgba(168, 75, 47, 1);

  --color-brown-600-rgb: 94, 82, 64;
  --color-teal-500-rgb: 33, 128, 141;
  --color-slate-900-rgb: 19, 52, 59;
  --color-slate-500-rgb: 98, 108, 113;
  --color-red-500-rgb: 192, 21, 47;
  --color-red-400-rgb: 255, 84, 89;
  --color-orange-500-rgb: 168, 75, 47;
  --color-orange-400-rgb: 230, 129, 97;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background-color: #f5f5f5;
  color: var(--color-slate-900);
  line-height: 1.6;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.header {
  background: linear-gradient(135deg, var(--color-teal-500) 0%, var(--color-teal-600) 100%);
  color: white;
  padding: 30px 20px;
  border-radius: 8px;
  margin-bottom: 30px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.header h1 {
  font-size: 28px;
  font-weight: 600;
  margin-bottom: 5px;
}

.header p {
  font-size: 14px;
  opacity: 0.9;
}

.tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 30px;
  border-bottom: 2px solid #ddd;
  flex-wrap: wrap;
}

.tab-btn {
  padding: 12px 24px;
  background: none;
  border: none;
  border-bottom: 3px solid transparent;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  color: var(--color-slate-500);
  transition: all 0.3s ease;
}

.tab-btn.active {
  color: var(--color-teal-500);
  border-bottom-color: var(--color-teal-500);
}

.tab-btn:hover {
  color: var(--color-teal-600);
}

.tab-content {
  display: none;
  animation: fadeIn 0.3s ease;
}

.tab-content.active {
  display: block;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.form-section {
  background: white;
  padding: 30px;
  border-radius: 8px;
  margin-bottom: 20px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.section-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--color-slate-900);
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.form-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 20px;
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-label {
  font-size: 12px;
  font-weight: 600;
  color: var(--color-slate-500);
  margin-bottom: 6px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.form-input {
  padding: 10px 12px;
  border: 1px solid #ddd;
  border-radius: 6px;
  font-size: 14px;
  transition: all 0.3s ease;
  font-family: inherit;
}

.form-input:focus {
  outline: none;
  border-color: var(--color-teal-500);
  box-shadow: 0 0 0 3px rgba(33, 128, 141, 0.1);
}

.form-input:disabled {
  background-color: #f5f5f5;
  cursor: not-allowed;
}

select.form-input {
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23333' d='M1 4l5 5 5-5'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 10px center;
  padding-right: 30px;
}

.expenses-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
}

.expense-card {
  background: #fafafa;
  border: 1px solid #eee;
  border-radius: 8px;
  padding: 16px;
  transition: all 0.3s ease;
}

.expense-card:hover {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
}

.expense-card-title {
  font-size: 13px;
  font-weight: 600;
  color: var(--color-slate-900);
  margin-bottom: 12px;
}

.expense-card-row {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
}

.expense-card-row.stacked {
  flex-direction: column;
}

.expense-card-row input {
  flex: 1;
  padding: 8px 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 13px;
}

.expense-subtotal {
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid #ddd;
  font-size: 13px;
  color: var(--color-teal-500);
  font-weight: 600;
  text-align: right;
}

.total-box {
  background: linear-gradient(135deg, var(--color-teal-500) 0%, var(--color-teal-600) 100%);
  color: white;
  padding: 20px;
  border-radius: 8px;
  text-align: center;
  font-size: 24px;
  font-weight: 700;
  margin-top: 20px;
}

.button-group {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-top: 30px;
  flex-wrap: wrap;
}

.btn {
  padding: 12px 24px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  min-width: 150px;
}

.btn-primary {
  background: linear-gradient(135deg, var(--color-teal-500) 0%, var(--color-teal-600) 100%);
  color: white;
  box-shadow: 0 4px 6px rgba(33, 128, 141, 0.2);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(33, 128, 141, 0.3);
}

.btn-primary:active {
  transform: translateY(0);
}

.btn-secondary {
  background: #f5f5f5;
  color: var(--color-slate-900);
  border: 1px solid #ddd;
}

.btn-secondary:hover {
  background: #eee;
}

.service-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 20px;
}

.service-btn {
  padding: 10px 16px;
  border: 1px solid #ddd;
  background: white;
  border-radius: 6px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
  transition: all 0.3s ease;
}

.service-btn:hover {
  border-color: var(--color-teal-500);
  background: rgba(33, 128, 141, 0.05);
}

.service-btn.selected {
  background: var(--color-teal-500);
  color: white;
  border-color: var(--color-teal-500);
}

@media (max-width: 768px) {
  .form-grid {
    grid-template-columns: 1fr;
  }

  .expenses-grid {
    grid-template-columns: 1fr;
  }

  .header h1 {
    font-size: 20px;
  }

  .tabs {
    gap: 5px;
  }

  .tab-btn {
    padding: 10px 12px;
    font-size: 12px;
  }

  .form-section {
    padding: 20px;
  }

  .button-group {
    flex-direction: column;
  }

  .btn {
    min-width: auto;
    width: 100%;
  }
}

@media print {
  .tabs, .button-group, .header {
    display: none;
  }

  body {
    background: white;
  }

  .form-section {
    box-shadow: none;
    border: 1px solid #ddd;
  }
}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üìÑ Sistema de Recibos Profissional</h1>
      <p>Guich√™ Web - Gera√ß√£o Autom√°tica de Recibos</p>
    </div>

    <div class="tabs">
      <button class="tab-btn active" onclick="switchTab('diarias')">üíº Di√°rias</button>
      <button class="tab-btn" onclick="switchTab('despesas')">üí∞ Despesas</button>
      <button class="tab-btn" onclick="switchTab('adiantamento')">üíµ Adiantamento</button>
    </div>

    <!-- ABA DI√ÅRIAS -->
    <div id="diarias" class="tab-content active">
      <div class="form-section">
        <div class="section-title">üë§ Informa√ß√µes do Recibo</div>
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Nome Completo *</label>
            <input type="text" id="nome" class="form-input" placeholder="Jo√£o da Silva">
          </div>
          <div class="form-group">
            <label class="form-label">CPF</label>
            <input type="text" id="cpf" class="form-input" placeholder="123.456.789-00">
          </div>
          <div class="form-group">
            <label class="form-label">Produtor</label>
            <input type="text" id="produtor" class="form-input" placeholder="Nome do Produtor">
          </div>
          <div class="form-group">
            <label class="form-label">Nome do Evento</label>
            <input type="text" id="nomeEvento" class="form-input" placeholder="Nome do Evento">
          </div>
          <div class="form-group">
            <label class="form-label">Data do Evento</label>
            <input type="date" id="dataEvento" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Estado</label>
            <select id="estadoDiarias" class="form-input" onchange="updateCidadesDiarias()">
              <option value="">Selecione o estado</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Cidade</label>
            <select id="cidadeDiarias" class="form-input" disabled>
              <option value="">Selecione a cidade</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">PIX (Opcional)</label>
            <input type="text" id="pixDiarias" class="form-input" placeholder="Chave PIX ou CPF">
          </div>
          <div class="form-group">
            <label class="form-label">Data do Recibo</label>
            <input type="date" id="dataReciboDiarias" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Estado do Recibo</label>
            <select id="estadoReciboDiarias" class="form-input" onchange="updateCidadesReciboDiarias()">
              <option value="">Selecione o estado</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Cidade do Recibo</label>
            <select id="cidadeReciboDiarias" class="form-input" disabled>
              <option value="">Selecione a cidade</option>
            </select>
          </div>
        </div>
      </div>

      <div class="form-section">
        <div class="section-title">üé´ Servi√ßos Prestados</div>
        <div class="service-buttons">
          <button class="service-btn" onclick="toggleServico(this, 'bilheteria')">üé´ BILHETERIA</button>
          <button class="service-btn" onclick="toggleServico(this, 'portaria')">üö™ PORTARIA</button>
          <button class="service-btn" onclick="toggleServico(this, 'estacionamento')">üöó ESTACIONAMENTO</button>
          <button class="service-btn" onclick="toggleServico(this, 'suporteOnline')">üéß SUPORTE ONLINE</button>
          <button class="service-btn" onclick="toggleServico(this, 'bar')">üç∫ BAR</button>
        </div>
        <div class="form-group">
          <label class="form-label">Descri√ß√£o Adicional dos Servi√ßos</label>
          <textarea id="descricaoServicos" class="form-input" placeholder="Descreva os servi√ßos prestados..." style="min-height: 80px; resize: vertical;"></textarea>
        </div>
      </div>

      <div class="form-section">
        <div class="section-title">üíº Valores dos Servi√ßos</div>
        <div class="expenses-grid">
          <!-- Instala√ß√£o PDV -->
          <div class="expense-card">
            <div class="expense-card-title">Instala√ß√£o PDV</div>
            <div class="expense-card-row">
              <div style="flex: 1;">
                <label class="form-label">QUANTIDADE</label>
                <input type="number" id="diariasInstalacaoQtd" class="form-input" placeholder="0" value="0" oninput="calcularTotalDiarias()">
              </div>
              <div style="flex: 1;">
                <label class="form-label">VALOR</label>
                <input type="number" id="diariasInstalacaoVal" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDiarias()">
              </div>
            </div>
            <div class="expense-subtotal" id="subtotalInstalacao">Subtotal: 0,00</div>
          </div>

          <!-- Hora Extra -->
          <div class="expense-card">
            <div class="expense-card-title">Hora Extra</div>
            <div class="expense-card-row">
              <div style="flex: 1;">
                <label class="form-label">QUANTIDADE</label>
                <input type="number" id="diariasHoraExtraQtd" class="form-input" placeholder="0" value="0" oninput="calcularTotalDiarias()">
              </div>
              <div style="flex: 1;">
                <label class="form-label">VALOR</label>
                <input type="number" id="diariasHoraExtraVal" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDiarias()">
              </div>
            </div>
            <div class="expense-subtotal" id="subtotalHoraExtra">Subtotal: 0,00</div>
          </div>

          <!-- Di√°ria Evento -->
          <div class="expense-card">
            <div class="expense-card-title">Di√°ria Evento</div>
            <div class="expense-card-row">
              <div style="flex: 1;">
                <label class="form-label">QUANTIDADE</label>
                <input type="number" id="diariasEventoQtd" class="form-input" placeholder="0" value="0" oninput="calcularTotalDiarias()">
              </div>
              <div style="flex: 1;">
                <label class="form-label">VALOR</label>
                <input type="number" id="diariasEventoVal" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDiarias()">
              </div>
            </div>
            <div class="expense-subtotal" id="subtotalEvento">Subtotal: 0,00</div>
          </div>

          <!-- Di√°ria Deslocamento -->
          <div class="expense-card">
            <div class="expense-card-title">Di√°ria Deslocamento</div>
            <div class="expense-card-row">
              <div style="flex: 1;">
                <label class="form-label">QUANTIDADE</label>
                <input type="number" id="diariasDeslocamentoQtd" class="form-input" placeholder="0" value="0" oninput="calcularTotalDiarias()">
              </div>
              <div style="flex: 1;">
                <label class="form-label">VALOR</label>
                <input type="number" id="diariasDeslocamentoVal" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDiarias()">
              </div>
            </div>
            <div class="expense-subtotal" id="subtotalDeslocamento">Subtotal: 0,00</div>
          </div>

          <!-- Hora Extra Deslocamento -->
          <div class="expense-card">
            <div class="expense-card-title">Hora Extra Deslocamento</div>
            <div class="expense-card-row">
              <div style="flex: 1;">
                <label class="form-label">QUANTIDADE</label>
                <input type="number" id="diariasHoraExtraDeslocamentoQtd" class="form-input" placeholder="0" value="0" oninput="calcularTotalDiarias()">
              </div>
              <div style="flex: 1;">
                <label class="form-label">VALOR</label>
                <input type="number" id="diariasHoraExtraDeslocamentoVal" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDiarias()">
              </div>
            </div>
            <div class="expense-subtotal" id="subtotalHoraExtraDeslocamento">Subtotal: 0,00</div>
          </div>
        </div>
        <div class="total-box" id="totalDiarias">Total: R$ 0,00</div>
      </div>

      <div class="button-group">
        <button class="btn btn-primary" onclick="gerarReciboDiarias()">üìÑ Gerar Recibo</button>
      </div>
    </div>

    <!-- ABA DESPESAS -->
    <div id="despesas" class="tab-content">
      <div class="form-section">
        <div class="section-title">üë§ Informa√ß√µes do Recibo</div>
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Nome Completo *</label>
            <input type="text" id="nomeDespesas" class="form-input" placeholder="Jo√£o da Silva">
          </div>
          <div class="form-group">
            <label class="form-label">CPF</label>
            <input type="text" id="cpfDespesas" class="form-input" placeholder="123.456.789-00">
          </div>
          <div class="form-group">
            <label class="form-label">Produtor</label>
            <input type="text" id="produtorDespesas" class="form-input" placeholder="Nome do Produtor">
          </div>
          <div class="form-group">
            <label class="form-label">Nome do Evento</label>
            <input type="text" id="nomeEventoDespesas" class="form-input" placeholder="Nome do Evento">
          </div>
          <div class="form-group">
            <label class="form-label">Data do Evento</label>
            <input type="date" id="dataEventoDespesas" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Estado</label>
            <select id="estadoDespesas" class="form-input" onchange="updateCidadesDespesas()">
              <option value="">Selecione o estado</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Cidade</label>
            <select id="cidadeDespesas" class="form-input" disabled>
              <option value="">Selecione a cidade</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">PIX (Opcional)</label>
            <input type="text" id="pixDespesas" class="form-input" placeholder="Chave PIX ou CPF">
          </div>
          <div class="form-group">
            <label class="form-label">Data do Recibo</label>
            <input type="date" id="dataReciboDespesas" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Estado do Recibo</label>
            <select id="estadoReciboDespesas" class="form-input" onchange="updateCidadesReciboDespesas()">
              <option value="">Selecione o estado</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Cidade do Recibo</label>
            <select id="cidadeReciboDespesas" class="form-input" disabled>
              <option value="">Selecione a cidade</option>
            </select>
          </div>
        </div>
      </div>

      <div class="form-section">
        <div class="section-title">üí∞ Valores das Despesas</div>
        <div class="expenses-grid">
          <!-- Despesas Simples -->
          <div class="expense-card">
            <div class="expense-card-title">Hospedagem (R$)</div>
            <input type="number" id="hospedagem" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDespesas()">
          </div>

          <div class="expense-card">
            <div class="expense-card-title">Transporte (R$)</div>
            <input type="number" id="transporte" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDespesas()">
          </div>

          <div class="expense-card">
            <div class="expense-card-title">Combust√≠vel (R$)</div>
            <input type="number" id="combustivel" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDespesas()">
          </div>

          <!-- Despesas com Quantidade -->
          <div class="expense-card">
            <div class="expense-card-title">Alimenta√ß√£o</div>
            <div class="expense-card-row">
              <div style="flex: 1;">
                <label class="form-label">QUANTIDADE</label>
                <input type="number" id="alimentacaoQtd" class="form-input" placeholder="0" value="0" oninput="calcularTotalDespesas()">
              </div>
              <div style="flex: 1;">
                <label class="form-label">VALOR</label>
                <input type="number" id="alimentacaoVal" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDespesas()">
              </div>
            </div>
            <div class="expense-subtotal" id="subtotalAlimentacao">Subtotal: 0,00</div>
          </div>

          <div class="expense-card">
            <div class="expense-card-title">Caf√© da Manh√£</div>
            <div class="expense-card-row">
              <div style="flex: 1;">
                <label class="form-label">QUANTIDADE</label>
                <input type="number" id="cafeQtd" class="form-input" placeholder="0" value="0" oninput="calcularTotalDespesas()">
              </div>
              <div style="flex: 1;">
                <label class="form-label">VALOR</label>
                <input type="number" id="cafeVal" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDespesas()">
              </div>
            </div>
            <div class="expense-subtotal" id="subtotalCafe">Subtotal: 0,00</div>
          </div>

          <div class="expense-card">
            <div class="expense-card-title">Alimenta√ß√£o Aeroporto</div>
            <div class="expense-card-row">
              <div style="flex: 1;">
                <label class="form-label">QUANTIDADE</label>
                <input type="number" id="aeroQtd" class="form-input" placeholder="0" value="0" oninput="calcularTotalDespesas()">
              </div>
              <div style="flex: 1;">
                <label class="form-label">VALOR</label>
                <input type="number" id="aeroVal" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDespesas()">
              </div>
            </div>
            <div class="expense-subtotal" id="subtotalAero">Subtotal: 0,00</div>
          </div>

          <div class="expense-card">
            <div class="expense-card-title">Ped√°gio (R$)</div>
            <input type="number" id="pedagio" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDespesas()">
          </div>

          <div class="expense-card">
            <div class="expense-card-title">Outros (R$)</div>
            <input type="number" id="outros" class="form-input" placeholder="0" step="0.01" value="0" oninput="calcularTotalDespesas()">
          </div>
        </div>
        <div class="total-box" id="totalDespesas">Total: R$ 0,00</div>
      </div>

      <div class="button-group">
        <button class="btn btn-primary" onclick="gerarReciboDespesas()">üìÑ Gerar Recibo</button>
      </div>
    </div>

    <!-- ABA ADIANTAMENTO -->
    <div id="adiantamento" class="tab-content">
      <div class="form-section">
        <div class="section-title">üë§ Informa√ß√µes do Recibo</div>
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Nome Completo *</label>
            <input type="text" id="nomeAdiantamento" class="form-input" placeholder="Jo√£o da Silva">
          </div>
          <div class="form-group">
            <label class="form-label">CPF</label>
            <input type="text" id="cpfAdiantamento" class="form-input" placeholder="123.456.789-00">
          </div>
          <div class="form-group">
            <label class="form-label">Produtor</label>
            <input type="text" id="produtorAdiantamento" class="form-input" placeholder="Nome do Produtor">
          </div>
          <div class="form-group">
            <label class="form-label">Nome do Evento</label>
            <input type="text" id="nomeEventoAdiantamento" class="form-input" placeholder="Nome do Evento">
          </div>
          <div class="form-group">
            <label class="form-label">Data do Evento</label>
            <input type="date" id="dataEventoAdiantamento" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Estado</label>
            <select id="estadoAdiantamento" class="form-input" onchange="updateCidadesAdiantamento()">
              <option value="">Selecione o estado</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Cidade</label>
            <select id="cidadeAdiantamento" class="form-input" disabled>
              <option value="">Selecione a cidade</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Valor do Adiantamento (R$)</label>
            <input type="number" id="valorAdiantamento" class="form-input" placeholder="0" step="0.01" value="0">
          </div>
          <div class="form-group">
            <label class="form-label">PIX (Opcional)</label>
            <input type="text" id="pixAdiantamento" class="form-input" placeholder="Chave PIX ou CPF">
          </div>
          <div class="form-group">
            <label class="form-label">Data do Recibo</label>
            <input type="date" id="dataReciboAdiantamento" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Estado do Recibo</label>
            <select id="estadoReciboAdiantamento" class="form-input" onchange="updateCidadesReciboAdiantamento()">
              <option value="">Selecione o estado</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Cidade do Recibo</label>
            <select id="cidadeReciboAdiantamento" class="form-input" disabled>
              <option value="">Selecione a cidade</option>
            </select>
          </div>
        </div>
      </div>

      <div class="button-group">
        <button class="btn btn-primary" onclick="gerarReciboAdiantamento()">üìÑ Gerar Recibo</button>
      </div>
    </div>
  </div>

  <!-- Modal para Imprimir/PDF -->
  <div id="pdfModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:9999; justify-content:center; align-items:center;">
    <div style="background:white; padding:30px; border-radius:8px; box-shadow:0 4px 6px rgba(0,0,0,0.2); max-width:400px; width:90%;">
      <h2 style="margin:0 0 20px 0; font-size:18px; color:var(--color-slate-900);">Escolha uma op√ß√£o</h2>
      <p style="margin:0 0 25px 0; color:var(--color-slate-500); font-size:14px;">Como voc√™ deseja proceder com o recibo?</p>
      <div style="display:flex; gap:10px; flex-direction:column;">
        <button onclick="imprimirRecibo()" style="padding:12px 24px; background:linear-gradient(135deg, var(--color-teal-500) 0%, var(--color-teal-600) 100%); color:white; border:none; border-radius:6px; cursor:pointer; font-weight:600; font-size:14px; transition:all 0.3s ease;">üñ®Ô∏è Imprimir</button>
        <button onclick="salvarPDF()" style="padding:12px 24px; background:linear-gradient(135deg, var(--color-teal-500) 0%, var(--color-teal-600) 100%); color:white; border:none; border-radius:6px; cursor:pointer; font-weight:600; font-size:14px; transition:all 0.3s ease;">üì• Baixar PDF</button>
        <button onclick="fecharModal()" style="padding:12px 24px; background:#f5f5f5; color:var(--color-slate-900); border:1px solid #ddd; border-radius:6px; cursor:pointer; font-weight:600; font-size:14px;">Cancelar</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
var estadosSelecionados = {
  diarias: {},
  despesas: {},
  adiantamento: {}
};

var servicosSelecionados = [];
var ultimoHTML = '';

var estadosCache = {};

function switchTab(tabName) {
  var tabs = document.querySelectorAll('.tab-content');
  var buttons = document.querySelectorAll('.tab-btn');
  
  tabs.forEach(function(tab) {
    tab.classList.remove('active');
  });
  buttons.forEach(function(btn) {
    btn.classList.remove('active');
  });
  
  document.getElementById(tabName).classList.add('active');
  event.target.classList.add('active');
}

// Sincroniza√ß√£o autom√°tica de campos comuns entre abas
function sincronizarCamposComuns() {
  var mapeamento = [
    { ids: ['nome', 'nomeDespesas', 'nomeAdiantamento'] },
    { ids: ['cpf', 'cpfDespesas', 'cpfAdiantamento'] },
    { ids: ['produtor', 'produtorDespesas', 'produtorAdiantamento'] },
    { ids: ['nomeEvento', 'nomeEventoDespesas', 'nomeEventoAdiantamento'] },
    { ids: ['dataEvento', 'dataEventoDespesas', 'dataEventoAdiantamento'] }
  ];
  
  mapeamento.forEach(function(grupo) {
    grupo.ids.forEach(function(idCampo) {
      var elemento = document.getElementById(idCampo);
      if (!elemento) return;
      
      // Usar 'change' para date inputs, 'input' para outros
      var tipoEvento = elemento.type === 'date' ? 'change' : 'input';
      
      elemento.addEventListener(tipoEvento, function() {
        // Sincronizar com todos os outros campos do mesmo grupo
        grupo.ids.forEach(function(outroId) {
          if (outroId !== idCampo) {
            var outroElemento = document.getElementById(outroId);
            if (outroElemento) {
              outroElemento.value = elemento.value;
            }
          }
        });
      });
    });
  });
}

function initializeStates() {
  const url = 'https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome';

  fetch(url)
    .then(function(response) {
      return response.json();
    })
    .then(function(estados) {
      var selects = ['estadoDiarias', 'estadoDespesas', 'estadoAdiantamento', 'estadoReciboDiarias', 'estadoReciboDespesas', 'estadoReciboAdiantamento'];

      selects.forEach(function(selectId) {
        var select = document.getElementById(selectId);
        if (!select) return;

        var html = '<option value="">Selecione o estado</option>';
        estados.forEach(function(uf) {
          html += '<option value="' + uf.id + '" data-sigla="' + uf.sigla + '">' + uf.sigla + ' - ' + uf.nome + '</option>';
        });
        select.innerHTML = html;
      });
    })
    .catch(function(err) {
      console.error('Erro ao carregar estados IBGE', err);
      alert('Erro ao carregar estados. Tente recarregar a p√°gina.');
    });
}

function updateCidadesDiarias() {
  updateCidadesIBGE('estadoDiarias', 'cidadeDiarias');
}

function updateCidadesDespesas() {
  updateCidadesIBGE('estadoDespesas', 'cidadeDespesas');
}

function updateCidadesAdiantamento() {
  updateCidadesIBGE('estadoAdiantamento', 'cidadeAdiantamento');
}

function updateCidadesReciboDiarias() {
  updateCidadesIBGE('estadoReciboDiarias', 'cidadeReciboDiarias');
}

function updateCidadesReciboDespesas() {
  updateCidadesIBGE('estadoReciboDespesas', 'cidadeReciboDespesas');
}

function updateCidadesReciboAdiantamento() {
  updateCidadesIBGE('estadoReciboAdiantamento', 'cidadeReciboAdiantamento');
}

function updateCidadesIBGE(estadoSelectId, cidadeSelectId) {
  var estadoSelect = document.getElementById(estadoSelectId);
  var cidadeSelect = document.getElementById(cidadeSelectId);
  var ufId = estadoSelect.value;

  if (!ufId) {
    cidadeSelect.innerHTML = '<option value="">Selecione a cidade</option>';
    cidadeSelect.disabled = true;
    return;
  }

  cidadeSelect.innerHTML = '<option value="">Carregando...</option>';
  cidadeSelect.disabled = true;

  if (estadosCache[ufId]) {
    preencherCidades(cidadeSelect, estadosCache[ufId]);
    return;
  }

  var url = 'https://servicodados.ibge.gov.br/api/v1/localidades/estados/' + ufId + '/municipios?orderBy=nome';

  fetch(url)
    .then(function(response) {
      return response.json();
    })
    .then(function(municipios) {
      estadosCache[ufId] = municipios;
      preencherCidades(cidadeSelect, municipios);
    })
    .catch(function(err) {
      console.error('Erro ao carregar munic√≠pios IBGE', err);
      cidadeSelect.innerHTML = '<option value="">Erro ao carregar cidades</option>';
    });
}

function preencherCidades(cidadeSelect, municipios) {
  var html = '<option value="">Selecione a cidade</option>';
  municipios.forEach(function(municipio) {
    html += '<option value="' + municipio.nome + '">' + municipio.nome + '</option>';
  });
  cidadeSelect.innerHTML = html;
  cidadeSelect.disabled = false;
}

function toggleServico(btn, servico) {
  btn.classList.toggle('selected');
  if (btn.classList.contains('selected')) {
    if (!servicosSelecionados.includes(servico)) {
      servicosSelecionados.push(servico);
    }
  } else {
    servicosSelecionados = servicosSelecionados.filter(function(s) {
      return s !== servico;
    });
  }
}

function calcularTotalDiarias() {
  var total = 0;
  
  var qtdInstalacao = parseFloat(document.getElementById('diariasInstalacaoQtd').value) || 0;
  var valInstalacao = parseFloat(document.getElementById('diariasInstalacaoVal').value) || 0;
  var subtotalInstalacao = qtdInstalacao * valInstalacao;
  document.getElementById('subtotalInstalacao').textContent = 'Subtotal: ' + subtotalInstalacao.toFixed(2).replace('.', ',');
  total += subtotalInstalacao;
  
  var qtdHoraExtra = parseFloat(document.getElementById('diariasHoraExtraQtd').value) || 0;
  var valHoraExtra = parseFloat(document.getElementById('diariasHoraExtraVal').value) || 0;
  var subtotalHoraExtra = qtdHoraExtra * valHoraExtra;
  document.getElementById('subtotalHoraExtra').textContent = 'Subtotal: ' + subtotalHoraExtra.toFixed(2).replace('.', ',');
  total += subtotalHoraExtra;
  
  var qtdEvento = parseFloat(document.getElementById('diariasEventoQtd').value) || 0;
  var valEvento = parseFloat(document.getElementById('diariasEventoVal').value) || 0;
  var subtotalEvento = qtdEvento * valEvento;
  document.getElementById('subtotalEvento').textContent = 'Subtotal: ' + subtotalEvento.toFixed(2).replace('.', ',');
  total += subtotalEvento;
  
  var qtdDeslocamento = parseFloat(document.getElementById('diariasDeslocamentoQtd').value) || 0;
  var valDeslocamento = parseFloat(document.getElementById('diariasDeslocamentoVal').value) || 0;
  var subtotalDeslocamento = qtdDeslocamento * valDeslocamento;
  document.getElementById('subtotalDeslocamento').textContent = 'Subtotal: ' + subtotalDeslocamento.toFixed(2).replace('.', ',');
  total += subtotalDeslocamento;
  
  var qtdHoraExtraDeslocamento = parseFloat(document.getElementById('diariasHoraExtraDeslocamentoQtd').value) || 0;
  var valHoraExtraDeslocamento = parseFloat(document.getElementById('diariasHoraExtraDeslocamentoVal').value) || 0;
  var subtotalHoraExtraDeslocamento = qtdHoraExtraDeslocamento * valHoraExtraDeslocamento;
  document.getElementById('subtotalHoraExtraDeslocamento').textContent = 'Subtotal: ' + subtotalHoraExtraDeslocamento.toFixed(2).replace('.', ',');
  total += subtotalHoraExtraDeslocamento;
  
  document.getElementById('totalDiarias').textContent = 'Total: R$ ' + total.toFixed(2).replace('.', ',');
}

function calcularTotalDespesas() {
  var total = 0;
  
  var simplesTotals = ['hospedagem', 'transporte', 'combustivel', 'pedagio', 'outros'];
  simplesTotals.forEach(function(id) {
    var valor = parseFloat(document.getElementById(id).value) || 0;
    total += valor;
  });
  
  var alimentacaoQtd = parseFloat(document.getElementById('alimentacaoQtd').value) || 0;
  var alimentacaoVal = parseFloat(document.getElementById('alimentacaoVal').value) || 0;
  var subtotalAlimentacao = alimentacaoQtd * alimentacaoVal;
  document.getElementById('subtotalAlimentacao').textContent = 'Subtotal: ' + subtotalAlimentacao.toFixed(2).replace('.', ',');
  total += subtotalAlimentacao;
  
  var cafeQtd = parseFloat(document.getElementById('cafeQtd').value) || 0;
  var cafeVal = parseFloat(document.getElementById('cafeVal').value) || 0;
  var subtotalCafe = cafeQtd * cafeVal;
  document.getElementById('subtotalCafe').textContent = 'Subtotal: ' + subtotalCafe.toFixed(2).replace('.', ',');
  total += subtotalCafe;
  
  var aeroQtd = parseFloat(document.getElementById('aeroQtd').value) || 0;
  var aeroVal = parseFloat(document.getElementById('aeroVal').value) || 0;
  var subtotalAero = aeroQtd * aeroVal;
  document.getElementById('subtotalAero').textContent = 'Subtotal: ' + subtotalAero.toFixed(2).replace('.', ',');
  total += subtotalAero;
  
  document.getElementById('totalDespesas').textContent = 'Total: R$ ' + total.toFixed(2).replace('.', ',');
}

function mostrarModalOpcoes() {
  document.getElementById('pdfModal').style.display = 'flex';
}

function fecharModal() {
  document.getElementById('pdfModal').style.display = 'none';
}

function imprimirRecibo() {
  var w = window.open('', '', 'width=900,height=1000');
  if (!w) {
    alert('‚ùå Erro: A janela de impress√£o n√£o p√¥de ser aberta. Verifique suas configura√ß√µes de pop-up.');
    return;
  }
  
  w.document.write('<!DOCTYPE html>');
  w.document.write('<html lang="pt-BR">');
  w.document.write('<head>');
  w.document.write('<meta charset="UTF-8">');
  w.document.write('<meta name="viewport" content="width=device-width, initial-scale=1.0">');
  w.document.write('<title>Impress√£o de Recibo</title>');
  w.document.write('<style>');
  w.document.write('body { font-family: Times New Roman, serif; margin: 0; padding: 20px; line-height: 1.5; color: #000; }');
  w.document.write('table { border-collapse: collapse; }');
  w.document.write('table td, table th { border: 1px solid #000; padding: 6px 8px; font-size: 12px; }');
  w.document.write('@media print { body { margin: 0; padding: 30px; } }');
  w.document.write('</style>');
  w.document.write('</head>');
  w.document.write('<body>');
  w.document.write(ultimoHTML);
  w.document.write('</body>');
  w.document.write('</html>');
  w.document.close();
  
  w.onload = function() {
    setTimeout(function() {
      w.focus();
      w.print();
      setTimeout(function() {
        w.close();
      }, 500);
    }, 500);
  };
  
  fecharModal();
}

function salvarPDF() {
  var opt = {
    margin: 10,
    filename: 'recibo.pdf',
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { scale: 2 },
    jsPDF: { orientation: 'portrait', unit: 'mm', format: 'a4' }
  };
  
  var element = document.createElement('div');
  element.innerHTML = ultimoHTML;
  
  html2pdf().set(opt).from(element).save();
  fecharModal();
}

function gerarReciboDiarias() {
  var nome = document.getElementById('nome').value || 'N√ÉO INFORMADO';
  if (!nome || nome === 'N√ÉO INFORMADO') {
    alert('Por favor, preencha o campo Nome Completo.');
    return;
  }
  
  var cpf = document.getElementById('cpf').value || '___.___.___-__';
  var produtor = document.getElementById('produtor').value || '';
  var nomeEvento = document.getElementById('nomeEvento').value || '';
  var dataEvento = document.getElementById('dataEvento').value || '';
  var cidade = document.getElementById('cidadeDiarias').value || '';
  var dataReciboDiarias = document.getElementById('dataReciboDiarias').value || '';
  var cidadeReciboDiarias = document.getElementById('cidadeReciboDiarias').value || 'Votuporanga';
  
  var servicosSelecionadosTexto = '';
  var btnsSelecionados = document.querySelectorAll('#diarias .service-btn.selected');
  var servicosArray = [];
  btnsSelecionados.forEach(function(btn) {
    var servico = btn.textContent.trim();
    servico = servico.replace(/[üé´üö™üöóüéßüç∫]/g, '').trim();
    if (servico) {
      servicosArray.push(servico);
    }
  });
  servicosSelecionadosTexto = servicosArray.length > 0 ? servicosArray.join(', ') : 'N√ÉO INFORMADO';
  
  var qtdInstalacao = parseFloat(document.getElementById('diariasInstalacaoQtd').value) || 0;
  var valInstalacao = parseFloat(document.getElementById('diariasInstalacaoVal').value) || 0;
  var instalacao = qtdInstalacao * valInstalacao;
  
  var qtdHoraExtra = parseFloat(document.getElementById('diariasHoraExtraQtd').value) || 0;
  var valHoraExtra = parseFloat(document.getElementById('diariasHoraExtraVal').value) || 0;
  var horaExtra = qtdHoraExtra * valHoraExtra;
  
  var qtdEvento = parseFloat(document.getElementById('diariasEventoQtd').value) || 0;
  var valEvento = parseFloat(document.getElementById('diariasEventoVal').value) || 0;
  var diaria = qtdEvento * valEvento;
  
  var qtdDeslocamento = parseFloat(document.getElementById('diariasDeslocamentoQtd').value) || 0;
  var valDeslocamento = parseFloat(document.getElementById('diariasDeslocamentoVal').value) || 0;
  var deslocamento = qtdDeslocamento * valDeslocamento;
  
  var qtdHoraExtraDeslocamento = parseFloat(document.getElementById('diariasHoraExtraDeslocamentoQtd').value) || 0;
  var valHoraExtraDeslocamento = parseFloat(document.getElementById('diariasHoraExtraDeslocamentoVal').value) || 0;
  var horaExtraDeslocamento = qtdHoraExtraDeslocamento * valHoraExtraDeslocamento;
  
  var total = instalacao + horaExtra + diaria + deslocamento + horaExtraDeslocamento;
  
  var html = '<html><head><meta charset="UTF-8"><title>Recibo</title><style>';
  html += 'body { font-family: Times New Roman, serif; margin: 30px; line-height: 1.5; color: #000; }';
  html += 'img { max-width: 100px; height: auto; display: block; margin-bottom: 15px; }';
  html += '.header { text-align: center; margin-bottom: 30px; }';
  html += 'h1 { font-size: 24px; font-weight: bold; margin: 15px 0 5px 0; letter-spacing: 2px; }';
  html += 'h2 { font-size: 14px; font-weight: bold; margin: 5px 0 25px 0; letter-spacing: 1px; }';
  html += 'p { text-align: justify; margin: 0 0 15px 0; font-size: 13px; line-height: 1.6; }';
  html += 'table { width: 100%; border-collapse: collapse; margin: 25px 0; }';
  html += 'table td, table th { border: 1px solid #000; padding: 6px 8px; font-size: 12px; }';
  html += 'table th { background-color: #fff; font-weight: bold; text-align: center; }';
  html += 'table td { text-align: left; }';
  html += 'table td:nth-child(2) { text-align: center; }';
  html += 'table td:nth-child(3) { text-align: right; }';
  html += 'table td:nth-child(4) { text-align: right; }';
  html += 'table tr:last-child td { font-weight: bold; }';
  html += '.signature-area { margin-top: 50px; text-align: center; }';
  html += '.signature-line { border-top: 1px solid #000; width: 250px; margin: 50px auto 0; }';
  html += '.footer-text { margin-top: 30px; font-size: 11px; text-align: center; line-height: 1.4; }';
  html += '</style></head><body>';
  
  html += '<div class="header">';
  html += '<img src="https://i.ibb.co/KjdhmtZJ/Imagem1.png" alt="GuicheWeb Logo" />';
  html += '<h1>RECIBO</h1>';
  html += '<h2>RECEBIMENTO DE DI√ÅRIAS</h2>';
  html += '</div>';
  
  var dataFormatada = '';
  if (dataEvento) {
    var partes = dataEvento.split('-');
    dataFormatada = partes[2] + '/' + partes[1] + '/' + partes[0];
  }
  var nomeExtenso = nome.toUpperCase();
  var produtorExtenso = produtor.toUpperCase();
  var eventoExtenso = nomeEvento.toUpperCase();
  var cidadeExtenso = cidade.toUpperCase();
  var cidadeReciboExtenso = cidadeReciboDiarias.toUpperCase();
  var totalExtenso = numeroParaExtenso(total);
  
  html += '<p>Eu, <strong>' + nomeExtenso + '</strong>, recebi do produtor <strong>' + produtorExtenso + '</strong>, a quantia de <strong>R$ ' + total.toFixed(2).replace('.', ',') + '</strong> (' + totalExtenso + ') referente a presta√ß√£o de servi√ßos de <strong>' + servicosSelecionadosTexto + '</strong> do evento <strong>' + eventoExtenso + '</strong> no dia <strong>' + dataFormatada + '</strong>, na cidade de <strong>' + cidadeExtenso + '</strong>.</p>';
  
  var dataReciboFormatada = '';
  if (dataReciboDiarias) {
    var partesRecibo = dataReciboDiarias.split('-');
    dataReciboFormatada = partesRecibo[2] + ' de ' + getMonthName(partesRecibo[1]) + ' de ' + partesRecibo[0];
  }
  
  html += '<div style="text-align: center; margin: 30px 0 20px 0; font-size: 13px;"><strong>' + cidadeReciboExtenso + ', ' + dataReciboFormatada + '.</strong></div>';
  html += '<div style="text-align: center; margin: 30px 0 10px 0;"><strong>_______________________________</strong></div>';
  html += '<div style="text-align: center; font-size: 13px; font-weight: bold; margin-bottom: 3px;">' + nomeExtenso + '</div>';
  html += '<div style="text-align: center; font-size: 12px;">CPF: ' + cpf + '</div>';
  
  html += '<table>';
  html += '<tr><th>SERVI√áO</th><th>QUANTIDADE</th><th>VALENTIA</th><th>VALOR PAGO</th></tr>';
  html += '<tr><td>INSTALA√á√ÉO PDV</td><td>' + (qtdInstalacao > 0 ? qtdInstalacao : 'o') + '</td><td>' + (valInstalacao > 0 ? 'R$ ' + valInstalacao.toFixed(2).replace('.', ',') : 'R$ 0,00') + '</td><td>R$ ' + instalacao.toFixed(2).replace('.', ',') + '</td></tr>';
  html += '<tr><td>HORA EXTRA</td><td>' + (qtdHoraExtra > 0 ? qtdHoraExtra : 'o') + '</td><td>' + (valHoraExtra > 0 ? 'R$ ' + valHoraExtra.toFixed(2).replace('.', ',') : 'R$ 0,00') + '</td><td>R$ ' + horaExtra.toFixed(2).replace('.', ',') + '</td></tr>';
  html += '<tr><td>DI√ÅRIA EVENTO</td><td>' + (qtdEvento > 0 ? qtdEvento : 'o') + '</td><td>' + (valEvento > 0 ? 'R$ ' + valEvento.toFixed(2).replace('.', ',') : 'R$ 0,00') + '</td><td>R$ ' + diaria.toFixed(2).replace('.', ',') + '</td></tr>';
  html += '<tr><td>DI√ÅRIA DE DESLOCAMENTO</td><td>' + (qtdDeslocamento > 0 ? qtdDeslocamento : 'o') + '</td><td>' + (valDeslocamento > 0 ? 'R$ ' + valDeslocamento.toFixed(2).replace('.', ',') : 'R$ 0,00') + '</td><td>R$ ' + deslocamento.toFixed(2).replace('.', ',') + '</td></tr>';
  html += '<tr><td>HORA EXTRA DESLOCAMENTO</td><td>' + (qtdHoraExtraDeslocamento > 0 ? qtdHoraExtraDeslocamento : 'o') + '</td><td>' + (valHoraExtraDeslocamento > 0 ? 'R$ ' + valHoraExtraDeslocamento.toFixed(2).replace('.', ',') : 'R$ 0,00') + '</td><td>R$ ' + horaExtraDeslocamento.toFixed(2).replace('.', ',') + '</td></tr>';
  html += '<tr><td colspan="3" style="text-align: right; font-weight: bold;">TOTAL</td><td style="font-weight: bold;">R$ ' + total.toFixed(2).replace('.', ',') + '</td></tr>';
  html += '</table>';
  
  html += '<div class="signature-area">';
  html += '<div class="signature-line"></div>';
  html += '<div style="text-align: center; font-size: 13px; font-weight: bold; margin-top: 3px;">' + nomeExtenso + '</div>';
  html += '<div style="text-align: center; font-size: 12px;">CPF: ' + cpf + '</div>';
  html += '</div>';
  
  html += '<div class="footer-text">';
  html += '<strong>Guich√™ Web Comercializa√ß√£o de Ingressos Ltda.</strong><br>';
  html += 'Av. Vale do Sol, 3236 ‚Äì Sal√£o 3 ‚Äì Bairro Vale do Sol ‚Äì Votuporanga/SP<br>';
  html += 'CEP: 15.500-269';
  html += '</div>';
  
  html += '</body></html>';
  
  ultimoHTML = html;
  mostrarModalOpcoes();
}

function getMonthName(month) {
  var meses = ['janeiro', 'fevereiro', 'mar√ßo', 'abril', 'maio', 'junho', 'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'];
  return meses[parseInt(month) - 1] || '';
}

function gerarReciboDespesas() {
  var nome = document.getElementById('nomeDespesas').value || 'N√ÉO INFORMADO';
  if (!nome || nome === 'N√ÉO INFORMADO') {
    alert('Por favor, preencha o campo Nome Completo.');
    return;
  }
  
  var cpf = document.getElementById('cpfDespesas').value || '___.___.___-__';
  var produtor = document.getElementById('produtorDespesas').value || '';
  var nomeEvento = document.getElementById('nomeEventoDespesas').value || '';
  var dataEvento = document.getElementById('dataEventoDespesas').value || '';
  var cidadeEvento = document.getElementById('cidadeDespesas').value || '';
  var dataRecibo = document.getElementById('dataReciboDespesas').value || '';
  var cidadeRecibo = document.getElementById('cidadeReciboDespesas').value || '';
  
  var hospedagem = parseFloat(document.getElementById('hospedagem').value) || 0;
  var transporte = parseFloat(document.getElementById('transporte').value) || 0;
  var combustivel = parseFloat(document.getElementById('combustivel').value) || 0;
  var pedagio = parseFloat(document.getElementById('pedagio').value) || 0;
  var outros = parseFloat(document.getElementById('outros').value) || 0;
  
  var alimentacaoQtd = parseFloat(document.getElementById('alimentacaoQtd').value) || 0;
  var alimentacaoVal = parseFloat(document.getElementById('alimentacaoVal').value) || 0;
  var subtotalAlimentacao = alimentacaoQtd * alimentacaoVal;
  
  var cafeQtd = parseFloat(document.getElementById('cafeQtd').value) || 0;
  var cafeVal = parseFloat(document.getElementById('cafeVal').value) || 0;
  var subtotalCafe = cafeQtd * cafeVal;
  
  var aeroQtd = parseFloat(document.getElementById('aeroQtd').value) || 0;
  var aeroVal = parseFloat(document.getElementById('aeroVal').value) || 0;
  var subtotalAero = aeroQtd * aeroVal;
  
  var total = hospedagem + transporte + combustivel + pedagio + outros + subtotalAlimentacao + subtotalCafe + subtotalAero;
  
  var html = '<html><head><meta charset="UTF-8"><title>Recibo Despesas</title><style>';
  html += 'body { font-family: Times New Roman, serif; margin: 0; padding: 40px; line-height: 1.5; color: #000; }';
  html += 'img { max-width: 80px; height: auto; display: block; margin: 0 auto 15px; }';
  html += '.header { text-align: center; margin-bottom: 25px; }';
  html += 'h1 { font-size: 20px; font-weight: bold; margin: 8px 0; letter-spacing: 1px; }';
  html += 'h2 { font-size: 12px; font-weight: bold; margin: 5px 0 0 0; letter-spacing: 0.5px; }';
  html += 'p { text-align: justify; margin: 15px 0; font-size: 13px; line-height: 1.6; }';
  html += '.date-line { text-align: center; margin: 20px 0; font-size: 13px; }';
  html += '.signature-area { text-align: center; margin-top: 30px; }';
  html += '.signature-line { border-top: 1px solid #000; width: 280px; margin: 35px auto 5px; }';
  html += '.signature-name { font-size: 12px; font-weight: bold; margin-top: 3px; }';
  html += '.signature-cpf { font-size: 11px; margin-top: 2px; }';
  html += 'table { width: 100%; border-collapse: collapse; margin: 20px 0; }';
  html += 'table th { border: 1px solid #000; padding: 8px; font-size: 12px; font-weight: bold; text-align: left; background: none; }';
  html += 'table td { border: 1px solid #000; padding: 8px; font-size: 12px; }';
  html += 'table td:last-child { text-align: right; width: 100px; }';
  html += 'table tr:last-child td { font-weight: bold; }';
  html += '.pix-section { text-align: center; margin: 15px 0; font-size: 12px; }';
  html += '.pix-line { border-top: 1px solid #000; margin: 15px 0; }';
  html += '.footer-text { text-align: center; margin-top: 30px; font-size: 10px; line-height: 1.4; }';
  html += '</style></head><body>';
  
  html += '<div class="header">';
  html += '<img src="https://i.ibb.co/KjdhmtZJ/Imagem1.png" alt="GuicheWeb Logo" />';
  html += '<h1>RECIBO</h1>';
  html += '<h2>RECEBIMENTO DE DESPESAS</h2>';
  html += '</div>';
  
  var nomeExtenso = nome.toUpperCase();
  var produtorExtenso = produtor.toUpperCase();
  var eventoExtenso = nomeEvento.toUpperCase();
  var cidadeEventoExtenso = cidadeEvento.toUpperCase();
  
  var dataEventoFormatada = '';
  if (dataEvento) {
    var partes = dataEvento.split('-');
    dataEventoFormatada = partes[2] + ' de ' + getMonthName(partes[1]) + ' de ' + partes[0];
  }
  
  var totalExtenso = numeroParaExtenso(total);
  html += '<p>Eu, <strong>' + nomeExtenso + '</strong>, recebi do produtor <strong>' + produtorExtenso + '</strong>, a quantia de <strong>R$ ' + total.toFixed(2).replace('.', ',') + '</strong> (' + totalExtenso + ') referente a reembolso de despesas relacionadas ao evento <strong>' + eventoExtenso + '</strong> no dia <strong>' + dataEventoFormatada + '</strong>, na cidade de <strong>' + cidadeEventoExtenso + '</strong>.</p>';
  
  var dataReciboFormatada = '';
  if (dataRecibo) {
    var partesRecibo = dataRecibo.split('-');
    dataReciboFormatada = partesRecibo[2] + ' de ' + getMonthName(partesRecibo[1]) + ' de ' + partesRecibo[0];
  }
  
  html += '<div class="date-line"><strong>' + cidadeRecibo.toUpperCase() + ', ' + dataReciboFormatada + '.</strong></div>';
  
  html += '<div class="signature-area">';
  html += '<div class="signature-line"></div>';
  html += '<div class="signature-name">' + nomeExtenso + '</div>';
  html += '<div class="signature-cpf">CPF: ' + cpf + '</div>';
  html += '</div>';
  
  html += '<table>';
  html += '<tr><th>TIPO DE DESPESA</th><th style="text-align: right;">VALOR</th></tr>';
  
  var despesas = [];
  if (hospedagem > 0) despesas.push({ nome: 'HOSPEDAGEM', valor: hospedagem });
  if (subtotalAlimentacao > 0) despesas.push({ nome: 'ALIMENTA√á√ÉO', valor: subtotalAlimentacao });
  if (transporte > 0) despesas.push({ nome: 'TRANSPORTE', valor: transporte });
  if (subtotalCafe > 0) despesas.push({ nome: 'CAF√â DA MANH√É', valor: subtotalCafe });
  if (subtotalAero > 0) despesas.push({ nome: 'ALIMENTA√á√ÉO AEROPORTO', valor: subtotalAero });
  if (combustivel > 0) despesas.push({ nome: 'COMBUST√çVEL', valor: combustivel });
  if (pedagio > 0) despesas.push({ nome: 'PED√ÅGIO', valor: pedagio });
  if (outros > 0) despesas.push({ nome: 'OUTROS', valor: outros });
  
  despesas.forEach(function(despesa) {
    html += '<tr><td>' + despesa.nome + '</td><td style="text-align: right;">R$ ' + despesa.valor.toFixed(2).replace('.', ',') + '</td></tr>';
  });
  
  html += '<tr><td>TOTAL</td><td style="text-align: right;">R$ ' + total.toFixed(2).replace('.', ',') + '</td></tr>';
  html += '</table>';
  
  html += '<div class="pix-line"></div>';
  
  html += '<div class="footer-text">';
  html += 'Guich√™ Web Comercializa√ß√£o de Ingressos Ltda.<br>';
  html += 'Av. Vale do Sol, 3236 ‚Äì Sal√£o 3 ‚Äì Bairro Vale do Sol ‚Äì Votuporanga/SP<br>';
  html += 'CEP: 15.500-269';
  html += '</div>';
  
  html += '</body></html>';
  
  ultimoHTML = html;
  mostrarModalOpcoes();
}

function gerarReciboAdiantamento() {
  var nome = document.getElementById('nomeAdiantamento').value.trim();
  if (!validarNome(nome)) {
    alert('‚ùå Por favor, preencha o campo Nome Completo.');
    return;
  }
  
  var cpf = document.getElementById('cpfAdiantamento').value.trim();
  var produtor = document.getElementById('produtorAdiantamento').value.trim();
  var nomeEvento = document.getElementById('nomeEventoAdiantamento').value.trim();
  var dataEvento = document.getElementById('dataEventoAdiantamento').value;
  var cidade = document.getElementById('cidadeAdiantamento').value.trim();
  var dataRecibo = document.getElementById('dataReciboAdiantamento').value;
  var cidadeRecibo = document.getElementById('cidadeReciboAdiantamento').value.trim();
  var valor = parseFloat(document.getElementById('valorAdiantamento').value) || 0;
  
  if (!validarValor(valor) || valor === 0) {
    alert('‚ùå Por favor, informe um valor v√°lido para o adiantamento.');
    return;
  }
  
  var html = '<html><head><meta charset="UTF-8"><title>Recibo Adiantamento</title><style>';
  html += 'body { font-family: Times New Roman, serif; margin: 30px; line-height: 1.5; color: #000; }';
  html += 'img { max-width: 100px; height: auto; display: block; margin-bottom: 15px; }';
  html += '.header { text-align: center; margin-bottom: 30px; }';
  html += 'h1 { font-size: 24px; font-weight: bold; margin: 15px 0 5px 0; letter-spacing: 2px; }';
  html += 'h2 { font-size: 14px; font-weight: bold; margin: 5px 0 25px 0; letter-spacing: 1px; }';
  html += 'p { text-align: justify; margin: 0 0 15px 0; font-size: 13px; line-height: 1.6; }';
  html += '.date-line { text-align: center; margin: 20px 0; font-size: 13px; }';
  html += '.signature-area { margin-top: 50px; text-align: center; }';
  html += '.signature-line { border-top: 1px solid #000; width: 250px; margin: 50px auto 0; }';
  html += '.signature-name { font-size: 12px; font-weight: bold; margin-top: 3px; }';
  html += '.signature-cpf { font-size: 11px; margin-top: 2px; }';
  html += '.footer-text { margin-top: 30px; font-size: 11px; text-align: center; line-height: 1.4; }';
  html += '</style></head><body>';
  
  html += '<div class="header">';
  html += '<img src="https://i.ibb.co/KjdhmtZJ/Imagem1.png" alt="GuicheWeb Logo" />';
  html += '<h1>RECIBO</h1>';
  html += '<h2>RECEBIMENTO DE ADIANTAMENTO</h2>';
  html += '</div>';
  
  var nomeProf = capitalizarNome(nome);
  var produtorProf = capitalizarNome(produtor);
  var eventoProf = capitalizarNome(nomeEvento);
  var cidadeProf = capitalizarNome(cidade);
  var cidadeReciboProf = capitalizarNome(cidadeRecibo);
  var valorExtenso = numeroParaExtenso(valor);
  
  var dataEventoFormatada = '';
  if (dataEvento) {
    var partes = dataEvento.split('-');
    dataEventoFormatada = partes[2] + ' de ' + getMonthName(partes[1]) + ' de ' + partes[0];
  }
  
  var dataReciboFormatada = '';
  if (dataRecibo) {
    var partesRecibo = dataRecibo.split('-');
    dataReciboFormatada = partesRecibo[2] + ' de ' + getMonthName(partesRecibo[1]) + ' de ' + partesRecibo[0];
  } else {
    var hoje = new Date();
    dataReciboFormatada = hoje.getDate() + ' de ' + getMonthName((hoje.getMonth() + 1).toString()) + ' de ' + hoje.getFullYear();
  }
  
  html += '<p>Eu, <strong>' + nomeProf + '</strong>, recebi do produtor <strong>' + produtorProf + '</strong>, a quantia de <strong>R$ ' + valor.toFixed(2).replace('.', ',') + '</strong> (' + valorExtenso + ') como adiantamento para o evento <strong>' + eventoProf + '</strong> marcado para o dia <strong>' + dataEventoFormatada + '</strong>, na cidade de <strong>' + cidadeProf + '</strong>.</p>';
  
  html += '<div class="date-line"><strong>' + cidadeReciboProf + ', ' + dataReciboFormatada + '</strong></div>';
  
  html += '<div class="signature-area">';
  html += '<div class="signature-line"></div>';
  html += '<div class="signature-name">' + nomeProf + '</div>';
  html += '<div class="signature-cpf">CPF: ' + (cpf || '___.___.___-__') + '</div>';
  html += '</div>';
  
  html += '<div class="footer-text">';
  html += '<strong>Guich√™ Web Comercializa√ß√£o de Ingressos Ltda.</strong><br>';
  html += 'Av. Vale do Sol, 3236 ‚Äì Sal√£o 3 ‚Äì Bairro Vale do Sol ‚Äì Votuporanga/SP<br>';
  html += 'CEP: 15.500-269';
  html += '</div>';
  
  html += '</body></html>';
  
  ultimoHTML = html;
  mostrarModalOpcoes();
}

function numeroParaExtenso(numero) {
  var unidades = ['', 'Um', 'Dois', 'Tr√™s', 'Quatro', 'Cinco', 'Seis', 'Sete', 'Oito', 'Nove'];
  var dezenas = ['', 'Dez', 'Vinte', 'Trinta', 'Quarenta', 'Cinquenta', 'Sessenta', 'Setenta', 'Oitenta', 'Noventa'];
  var centenas = ['', 'Cento', 'Duzentos', 'Trezentos', 'Quatrocentos', 'Quinhentos', 'Seiscentos', 'Setecentos', 'Oitocentos', 'Novecentos'];
  
  function converterParte(n) {
    if (n === 0) return '';
    if (n < 10) return unidades[n];
    if (n < 20) {
      var especiais = {10: 'Dez', 11: 'Onze', 12: 'Doze', 13: 'Treze', 14: 'Quatorze', 15: 'Quinze', 16: 'Dezesseis', 17: 'Dezessete', 18: 'Dezoito', 19: 'Dezenove'};
      return especiais[n];
    }
    if (n < 100) {
      var d = Math.floor(n / 10);
      var u = n % 10;
      return dezenas[d] + (u > 0 ? ' e ' + unidades[u] : '');
    }
    var c = Math.floor(n / 100);
    var resto = n % 100;
    return centenas[c] + (resto > 0 ? ' e ' + converterParte(resto) : '');
  }
  
  if (numero === 0) return 'Zero';
  var reais = Math.floor(numero);
  var resultado = converterParte(reais);
  
  if (reais === 1) {
    resultado += ' Real';
  } else {
    resultado += ' Reais';
  }
  
  return resultado;
}

function validarNome(nome) {
  return nome && nome.trim().length > 0;
}

function validarValor(valor) {
  return !isNaN(valor) && valor > 0;
}

function capitalizarNome(texto) {
  if (!texto) return '';
  return texto
    .toLowerCase()
    .split(' ')
    .map(function(word) {
      return word.charAt(0).toUpperCase() + word.slice(1);
    })
    .join(' ');
}

window.addEventListener('DOMContentLoaded', function() {
  initializeStates();
  sincronizarCamposComuns();
});
  </script>
</body>
</html>
